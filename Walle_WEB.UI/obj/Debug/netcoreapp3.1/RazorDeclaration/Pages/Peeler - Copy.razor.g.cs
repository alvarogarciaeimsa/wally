// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace Walle_WEB.UI.Pages
{
    #line hidden
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Walle_WEB.UI;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\_Imports.razor"
using Walle_WEB.UI.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using Model;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using Interfaces;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Collections.Generic;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Threading.Tasks;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Threading;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
using System.Globalization;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/inicio-peeler")]
    public partial class Peeler___Copy : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 203 "C:\Users\Usuario\source\repos\Walle_WEB\Walle_WEB.UI\Pages\Peeler - Copy.razor"
       
    PeelerBitacora peelerbitacora = new PeelerBitacora();

    private int paginaActual = 1;
    private int paginasTotales;
    private string numeroLoteFiltro;
    private decimal RolloFiltro;
    private int PedidoFiltro;
    private int CilindroFiltro;
    private string TipoEspuma;
    private int Alma;
    private DateTimeOffset Fecha;
    private int Turno = 1;
    private int Maquina;
    private int Operador;
    private decimal Altura;
    private decimal Desperdicio;
    private decimal Largo;
    private decimal Espesor;
    private string Observaciones;
    private decimal PesoRollo = 0;
    private decimal Recuperable;
    private int Pesaje = 0;
    public string VarHoraIni;
    public string Message { get; set; }

    protected async Task SavePeeler()
    {
        paginaActual = 1;
        var VarHoraIni = DateTime.Now.ToString("hh:mm:ss tt");
        var VarHoraFin = DateTime.Now.ToString("hh:mm:ss tt");
        var VarFecha = DateTime.Now;


        peelerbitacora.IdTurno = 1;

        if (peelerbitacora.DetallesId == "sd")
        {
            peelerbitacora.DetallesId = "sd";
            peelerbitacora.Dañado = false;
        }
        else
        {
            peelerbitacora.Dañado = true;
        }

        peelerbitacora.HoraInicial = DateTime.Now.TimeOfDay;
        peelerbitacora.HoraFinal = DateTime.Now.TimeOfDay;
        // var VarHoraIni = DateTime.Now.Hour+":"+ DateTime.Now.Minute + ":" + DateTime.Now.Second + "." + DateTime.Now.Millisecond;
        peelerbitacora.PesoDesperdicio = (peelerbitacora.PesoRollo - peelerbitacora.PesoRecuperable);
        peelerbitacora.NoRollo = 1;
        peelerbitacora.Created = DateTime.Now;
        peelerbitacora.UserCreated = 1;
        peelerbitacora.Updated = DateTime.Now;
        peelerbitacora.UserUpdated = 1;


        await PeelerService.SavePeeler(peelerbitacora);

    }

    private async Task Limpiar()
    {
        numeroLoteFiltro = string.Empty;
        paginaActual = 1;
        //await CargarPeeler();
    }


    private async Task Save()
    {
        paginaActual = 1;

        var VarHoraFin = DateTime.Now.ToString("hh:mm:ss tt");

        var VarFecha = DateTime.Now;
        //GrabaPeeler = new SqlConfiguration(a).GrabarPeeler(numeroLoteFiltro, CilindroFiltro, TipoEspuma, VarFecha, PedidoFiltro, Observaciones, PesoRollo, Alma, Espesor, Largo, Recuperable, Desperdicio, Maquina, Operador, Turno, VarHoraIni, VarHoraFin);        
        int x = 0;
    }


    public async Task Busqueda()
    {
        VarHoraIni = DateTime.Now.ToString("hh:mm:ss tt");
        int startIndex = 5;
        int Caracteres = numeroLoteFiltro.Length;
        Caracteres = Caracteres;
        int PosInicial = Caracteres - 2;
        int length = 2;
        string bloque = numeroLoteFiltro.Substring(PosInicial, length);


        var Tipo = numeroLoteFiltro;
        var Col = 0;
        Col = Tipo.IndexOf("/");

        var Cons = Tipo.Substring(0, Col);
        if (Cons != null)
        {
            //ViewBag.VarConsecutivo = Cons;
        }

        Cons = Cons + "/";
        Tipo = Tipo.Replace(Cons, "");
        Col = Tipo.IndexOf("/");

        Cons = Tipo.Substring(0, Col);
        if (Cons != null)
        {
            //ViewBag.VarConsecutivo = Cons;
        }

        Cons = Cons + "/";
        Tipo = Tipo.Replace(Cons, "");


        Col = Tipo.IndexOf("/");

        Cons = Tipo.Substring(0, Col);
        if (Cons != null)
        {
            //ViewBag.VarConsecutivo = Cons;
        }

        TipoEspuma = Cons;

        int Cilindro = int.Parse(bloque);
        CilindroFiltro = Cilindro;
        String numeroLote = numeroLoteFiltro.Substring(0, PosInicial - 1);
        numeroLoteFiltro = numeroLote;
    }


    protected async override Task OnInitializedAsync()
    {
        //peelerbitacora = new PeelerBitacora();
        //peelerbitacora.OnSelectedPeelerChanged += StateHasChanged();
        //return base.OnInitializedAsync();
        var DateAndTime = DateTime.Now;
        Fecha = DateAndTime;

    }


    //protected async override Task OnInitializedAsync()
    //{
    //    try
    //    {
    //        peelerbitacora =  await PeelerService.GetAllPeeler();
    //    }
    //    catch (Exception ex)
    //    {
    //        Message = "Something went wrong... " + ex.Message;
    //    }
    //}

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JS { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IPeelerService PeelerService { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
